<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Listing in a YellowPage Directory - Icecast Docs</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Listing in a YellowPage Directory";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Icecast Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Introduction</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../basic_setup/">Basic Setup</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../config_file/">Configuration File</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../server_stats/">Server Statistics</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../auth/">Authentication</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../relaying/">Relaying</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Listing in a YellowPage Directory</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#overview">Overview</a></li>
                
            
                <li class="toctree-l3"><a href="#configuring-icecast-for-yp-support">Configuring Icecast for YP Support</a></li>
                
                    <li><a class="toctree-l4" href="#further-options-that-play-a-significant-role-in-yp-listings">Further options that play a significant role in YP listings</a></li>
                
            
                <li class="toctree-l3"><a href="#configuring-your-source-client-for-yp-support">Configuring Your Source Client for YP Support</a></li>
                
            
                <li class="toctree-l3"><a href="#troubleshooting">Troubleshooting</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../admin_interface/">Admin Interface</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../win32/">Windows Specific</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Icecast Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Listing in a YellowPage Directory</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="overview">Overview</h1>
<p>A YP directory is a listing of broadcast streams. Icecast has it own YP directory located at
<a href="http://dir.xiph.org">http://dir.xiph.org</a>. Currently Icecast can only be listed in an Icecast-supported YP directory.<br />
This means that you cannot list your stream in the Shoutcast YP directory, due to their terms of service.</p>
<p>In the Icecast configuration file are all the currently available YP directory servers. Listing your stream in a YP is
a combination of settings in the Icecast configuration file and also in your source client. It is of great importance
to configure Icecast correctly, as even one wrong setting can prevent listings to be accepted by a YP directory.</p>
<h1 id="configuring-icecast-for-yp-support">Configuring Icecast for YP Support</h1>
<p>First of all, Icecast must have been built with YP support. This is automatically done if you have libcurl installed.
If libcurl is not detected when icecats is compiled, then YP support is disabled.<br />
If Icecast has been built with YP support, then the following configuration options control the YP directory settings:</p>
<pre><code class="xml">&lt;directory&gt;
    &lt;yp-url-timeout&gt;15&lt;/yp-url-timeout&gt;
    &lt;yp-url&gt;http://dir.xiph.org/cgi-bin/yp-cgi&lt;/yp-url&gt;
&lt;/directory&gt;
</code></pre>

<p>Multiple directory XML chunks can be specified in order to be listed in multiple directories.</p>
<h2 id="further-options-that-play-a-significant-role-in-yp-listings">Further options that play a significant role in YP listings</h2>
<dl>
<dt>hostname</dt>
<dd>The hostname option <strong>MUST</strong> be set to a name that resolves to the machine this Icecast server runs on.</dd>
<dt>listener-socket port</dt>
<dd>The <strong>first</strong> <code>listener-socket</code>+<code>port</code> entry is used to build the URL advertized to the YP server.</dd>
<dt>listener-socket bind-address</dt>
<dd>If you don't specify an explicit <code>bind-address</code>, including <code>::</code> and <code>0.0.0.0</code>, then the default
  bind behaviour of your operating system will apply, this may have unexpected consequences for dual-stack
  (IPv6 and IPv4) setups.</dd>
</dl>
<p>If your hostname resolves to both an AAAA and an A record (IPv6 and IPv4), then you <strong>MUST</strong> verify,
that Icecast listens to both. If in doubt create two listener-socket entries and use <code>::</code> and <code>0.0.0.0</code>
as the respective <code>bind-address</code>.</p>
<dl>
<dt>admin</dt>
<dd>If you are listing on a YP, then this field <strong>MUST</strong> contain a valid email address of a technical contact
  on your side. YP admins will use this to reach you in case your server is misconfigured and causes problems
  for the YP directory. An invalid or unreachable address is likely to get your radio/server/network banned from YP.</dd>
</dl>
<h3 id="verifying-the-advertized-url">Verifying the advertized URL</h3>
<p>After adjusting the settings and configuring your source client, you should verify setup: <br />
Go to the Icecast web interface, specifically the admin part <code>/admin/</code> and look for the <code>listenurl</code> values 
of your streams. These URLs <strong>MUST</strong> work from the public internet, or your listings will fail.</p>
<p>This is also one of the checks performed by a YP server. Common misconfigurations are:</p>
<ul>
<li><code>&lt;hostname&gt;</code> set to <code>localhost</code></li>
<li><code>&lt;hostname&gt;</code> set to some address that does <strong>NOT</strong> point to the Icecast server</li>
<li>hostname has AAAA record but Icecast not bound to <code>::</code></li>
<li>multiple <code>&lt;listener-socket&gt;</code> entries, but the first one is not publicly reachable</li>
</ul>
<h1 id="configuring-your-source-client-for-yp-support">Configuring Your Source Client for YP Support</h1>
<p>This is usually covered in the source client documentation. More specifically, the source client needs to provide
the HTTP header <code>Ice-Public: 1</code> on connect in order to enable YP listing of the stream.<br />
This can however be overridden in the server side mount point settings, refer to “<a href="../config-file.html#mountsettings">Icecast Config File</a>”
for further details.<br />
If a mountpoint is being listed on a YP, then you will see some additional statistics relating to the YP such as
<code>last-touch</code>, <code>currently-playing</code>, etc.</p>
<h1 id="troubleshooting">Troubleshooting</h1>
<p>As with all Icecast problems, the error log is the goto place to start. If necessary temporary increase the log level to 
<code>4</code> (debug) and reload the Icecast config. All relevant messages will contain <code>YP</code>. Especially those messages that tell
you that something <code>failed</code> will contain important hints and or messages from the YP server. If your entry submission
is directly rejected the server will tell why, if your entry gets delisted after submission, then you will see 
updates/touches fail. Depending on the YP server the stream reachability check will be deferred, so you will see
a successfull initial submission, but if your stream is found to be unreachable it will be delisted and updates will fail.
Please note that YP directories will check both IPv6 and IPv4 availability of streams. See the list of common misconfigurations
for further hints.</p>
<p>Should you still have problems listing on <a href="../dir.xiph.org">http://dir.xiph.org</a>, then please:</p>
<ul>
<li>Set your logging to <code>4</code> (debug)</li>
<li>Reload/restart Icecast</li>
<li>Make sure your streams are running and marked public (either by source setting or mountpoint override)</li>
<li>Wait for <strong>one hour</strong></li>
<li>Filter the error log for messages from the last hour, that are beginning with <code>yp/</code></li>
<li>Join the <a href="../Icecast users mailing list">http://lists.xiph.org/mailman/listinfo/icecast</a> (else the following step will fail!)</li>
<li>Send a mail to <a href="../icecast@xiph.org">mailto:icecast@xiph.org</a> containing:<ol>
<li>The public URL of your Icecast server - e.g. <code>http://icecast.example.org:8000/</code> (Even if you have removed the status pages! This does <strong>NOT</strong> mean your homepage.)</li>
<li>The <code>&lt;hostname&gt;</code>, <code>&lt;listen-socket&gt;</code> and <code>&lt;directory&gt;</code> sections of your <code>icecast.xml</code></li>
<li>The <em>filtered</em> error.log prepared previously (as an attachment)</li>
</ol>
</li>
<li>Wait for replies from the mailing list</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../admin_interface/" class="btn btn-neutral float-right" title="Admin Interface"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../relaying/" class="btn btn-neutral" title="Relaying"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../relaying/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../admin_interface/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
